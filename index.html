<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Population in Malaysian States</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f9f9f9;
    }
    #vis {
      margin: auto;
      width: 1000px;
      height: 500px;
    }
  </style>
</head>
<body>
  <h2>Population in Malaysia by States(2010)</h2>
  <div id="vis"></div>
  <script>
    const spec ={
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 1000,
  "height":500,
  "title": "Population In Malaysia (2010)",
  "projection": {
    "type": "mercator",
    "center": [110, 4],
    "scale": 2500
  },
  "layer": [
    
    {
      "data": {
        "url": "https://raw.githubusercontent.com/Ritz21-Raina/FIT3179_Homework_W9/refs/heads/main/output%20(1).json",
        "format": {"type": "topojson", "feature": "my"}
      },
      "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"}
    },
    {
  "data": {"graticule": {"step": [1, 1]}},
  "mark": {"type": "geoshape", "stroke": "#cccccc", "strokeWidth": 0.5}
},
    {
      "data": {
        "url": "https://raw.githubusercontent.com/Ritz21-Raina/FIT3179_Homework_W9/refs/heads/main/dataset.csv"
      },
      "transform": [
        {"filter": "datum.sex == 'both'"},
        {"filter": "datum.ethnicity == 'overall'"},
        {"filter": "datum.Year == 2010"}
      ],
      "mark": {"type": "circle"},
      "encoding": {
        "longitude": {"field": "lon", "type": "quantitative"},
        "latitude": {"field": "lat", "type": "quantitative"},
        "size": {
          "field": "abs",
          "type": "quantitative",
          "title": "Population",
          "scale": {"range": [5, 100]}
        },
        "color": {"value": "#377eb8"},
        "tooltip": [
          {"field": "state", "type": "nominal"},
          {"field": "Year", "type": "ordinal"},
          {"field": "abs", "type": "quantitative", "title":"Population"}
        ]
      }
    }
  ]
};

    vegaEmbed('#vis', spec).catch(console.error);
  </script>
</body>
</html>
